---
layout: post
category : ZooKeeper
tagline: ZooKeeper
tags : [ZooKeeper]
---
{% include JB/setup %}

## 特性
- 事务带有全局唯一ID编号，保证事务的顺序性
- 数据存放在内存中，保证速度

## 主要利用功能
- 节点只能有一个客户端竞争得到创建的机会
- 临时节点与客户端连接相关，客户端断开连接后，临时节点会消失
- watch可以监控节点及其下方子节点的变化，可以通过监控临时节点检查集群服务器活度

## 主要使用场景
- 主备切换及高可用性
	1. 所有服务器竞争创建临时节点
	2. 竞争获得节点的成为master，其他节点成为slave，并watch该节点变化
	3. 当该临时节点失效时，其他slave坚挺到该变化，再次进行节点竞争
- 分布式读写锁
	- 简单实现
		1. 所有需要竞争锁的注册顺序节点，并标注自己需要的是R或W
		2. 监听该父节点变化，节点出现变化后检查当前最低序号的节点是否是自己的节点，是则获得锁
	- 复杂实现
		1. 注册顺序节点
		2. 根据自己是R或是W需求，R的话只监听离自己序号最近的W节点，W的话只监听离自己序号最近的W或R节点
		3. 能大幅减少监听事件，减少自己和zk服务器的负担